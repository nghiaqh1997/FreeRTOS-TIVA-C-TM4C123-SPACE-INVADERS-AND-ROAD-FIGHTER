/*
 * Task2.c
 *
 *  Created on: May 18, 2022
 *      Author: nghia
 */
#include "include.h"
#include "Images.h"
#include "Task_def.h"
#include "Nokia5110/SPI.h"
#include "sprite.h"
void ADCSS3Handler(){
    ADCIntClear(ADC0_BASE, 3);
    portBASE_TYPE xHigherPriorityTaskWoken = pdFALSE;
    xSemaphoreGiveFromISR(xSemaphore2,&xHigherPriorityTaskWoken);
    portYIELD_FROM_ISR(xHigherPriorityTaskWoken);
}
void vTask2(void *pvParameters){
    uint32_t Value;
    portTickType xLastTaskWakeTime = xTaskGetTickCount();
    xSemaphoreTake(xSemaphore2,0);
    while(1){
        if(xSemaphoreTake(xSemaphore2,portMAX_DELAY)){
            ADCSequenceDataGet(ADC0_BASE, 3, &Value);
            Player.x = Value/56;
            Player_Draw();
            Nokia5110_ClearBuffer();
            Nokia5110_DisplayBuffer();
            UARTprintf("%d\n",Player.x);
        }
    }
}




